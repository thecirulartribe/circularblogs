{% extends "base.html" %}

{% block page_head %}
  {% load static %}
  <title>Dashboard | Circular Blogs </title>
  <link rel="stylesheet" href="{% if debug %}{% static 'css/dashboard.css' %}{% else %}{% static 'minified-css/dashboard-min.css' %}{% endif %}">
{% endblock%}


{% block page_content %}
<div class="dashboard-container">
  <aside class="sidebar">
    <ul>
      <li><a href="{% url 'create_blog' %}">Create Blog</a></li>
      <li><a href="{% url 'logout' %}">Log out</a></li>
    </ul>
  </aside>
  <main class="dashboard-content">
    <h2>Welcome, {{ user.username }}</h2>
    <!-- Blog Stats Section -->
    <a class="card create-blog-mobile" href="{% url 'create_blog' %}"><h3>Create Blog</h3></a>
    <div class="stats">
      <div class="card published"><h3>Published Blogs</h3><p>{{ published_blogs }}</p></div>
      <div class="card queued"><h3>Queued Blogs</h3><p>{{ queued_blogs }}</p></div>
      <div class="card reverted"><h3>Reverted Blogs</h3><p>{{ reverted_blogs }}</p></div>
      <div class="card draft"><h3>Draft Blogs</h3><p>{{ draft_blogs }}</p></div>
      <div class="card views"><h3>Total Blog Views</h3><p>{{ total_views }}</p></div>
    </div>

    <!-- Blog Status Sections -->
    <section class="blog-sections">
      <div class="blog-box queued-section">
        <h3>Queued Blogs (Waiting for Verification)</h3>
        <ul>
          {% for blog in queued_list %}
          <li><a href="{% url 'edit_blog' blog.id %}">{{ blog.Title }}</a> - {{ blog.blog_date }}</li>
          {% empty %}
          <li>No blogs waiting for verification.</li>
          {% endfor %}
        </ul>
      </div>
      <div class="blog-box reverted-section">
        <h3>Reverted Blogs (Need Changes)</h3>
        <ul>
          {% for blog in reverted_list %}
          <li><a href="{% url 'edit_blog' blog.id %}">{{ blog.Title }}</a> - {{ blog.updated_at }}</li>
          {% empty %}
          <li>No reverted blogs.</li>
          {% endfor %}
        </ul>
      </div>
      <div class="blog-box draft-section">
        <h3>Drafts</h3>
        <ul>
          {% for blog in draft_list %}
          <li><a href="{% url 'edit_blog' blog.id %}">{{ blog.Title }}</a> - {{ blog.updated_at }}</li>
          {% empty %}
          <li>No drafts found.</li>
          {% endfor %}
        </ul>
      </div>
      <div class="blogs-section published-section">
        <h2>Published Blogs</h2>
        <div class="blog-list">
          {% for blog in blogs %}
          <div class="blog-card">
            <h3>
                <a href="{% url 'view_blog' blog.url %}" class="blog-title">{{ blog.Title }}</a>
            </h3>
            <p><strong>Updated:</strong> {{ blog.updated_at|date:"F d, Y" }}</p>
            <p><strong>Views:</strong> {{ blog.views }}</p>
            <div class="blog-actions">
              <a href="{% url 'edit_blog' blog.id %}" class="btn edit-btn">Edit</a>
              <a href="{% url 'delete_blog' blog.id %}" class="btn delete-btn">Delete</a>
            </div>
          </div>
          {% empty %}
          <p>No published blogs yet.</p>
          {% endfor %}
        </div>
      </div>
    </section>
    </main>
</div>
{% endblock %}

